<% layout('/layouts/boilerplate') -%>
<link rel="stylesheet" href="/css/home.css">
<style>
  .hero {
    background: url('images/hero.jpg') no-repeat center center;
    background-size: cover;
    margin-top: 5px;
    color: #fff;
    text-align: center;
    padding: 120px 0;
    transition: background-size 0.5s ease;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5); /* Dark overlay for better text visibility */
  }
  .hero .container {
    position: relative;
    z-index: 1;
  }
  .hero h1 {
    font-size: 4rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
    transition: opacity 0.5s ease;
  }
  .hero p {
    font-size: 1.5rem;
    margin-bottom: 2rem;
    transition: opacity 0.5s ease;
  }
  .hero a.btn {
    background-color: #3c2559; /* Updated color */
    color: #fff;
    padding: 1rem 2rem;
    border-radius: 0.5rem;
    font-size: 1.25rem;
    text-decoration: none;
    transition: background-color 0.3s ease, transform 0.3s ease;
  }
  .hero a.btn:hover {
    background-color: #2b1a3e; /* Darker shade */
    transform: scale(1.05);
  }
  .notification {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 10px;
  }
  .direct {
    margin-right: 10px;
  }
  @media (max-width: 767px) {
    .direct {
      margin-bottom: 10px;
    }
  }
</style>
<div class="notification">
  <%- include("../includes/exclusive.ejs") %>
</div>
  <!-- Hero Section -->
  <section id="home" class="hero" style="position: relative; overflow: hidden;">
    <picture>
      <source srcset="/images/hero.webp" type="image/webp">
      <source srcset="/images/hero.jpg" type="image/jpeg">
      <img src="/images/hero.jpg" alt="Hero Image" style="width: 100%; height: auto; position: absolute; top: 0; left: 0; z-index: -1; object-fit: cover; height: 100%; width: 100%;">
    </picture>
    <div class="container" style="position: relative; z-index: 1;">
      <h1>Welcome to msbtemcq</h1>
      <p>Test your knowledge and improve your skills with our interactive Tests.</p>
      <a href="/TestApp/practice" class="btn btn-primary btn-lg direct">Start Practice</a>
      <a href="/TestApp/test" class="btn btn-primary btn-lg">Start Test</a>
    </div>
  </section>
<br>
  <!-- Leaderboard
  <section id="leaderboard" class="container my-5">
    <h2 class="text-center mb-4">Leaderboard - Top Users by Time Spent</h2>
    <% function formatTime(seconds) {
         const d = Math.floor(seconds / (3600*24));
         const hr = Math.floor((seconds % (3600*24)) / 3600);
         const m = Math.floor((seconds % 3600) / 60);
         const s = Math.floor(seconds % 60);
         if (d > 0) {
           return `${d}d ${hr}hr ${m}m ${s}s`;
         } else if (hr > 0) {
           return `${hr}hr ${m}m ${s}s`;
         } else if (m > 0) {
           return `${m}m ${s}s`;
         } else if (s > 0) {
           return `${s}s`;
         } else {
           return `00s`;
         }
       }
    %>
    <% if (topUsers && topUsers.length > 0) { %>
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Username</th>
            <th>Time Spent</th>
          </tr>
        </thead>
        <tbody>
          <% topUsers.forEach((user, index) => { %>
            <tr>
              <td class="<%= index === 0 ? 'rank-one' : index === 1 ? 'rank-two' : index === 2 ? 'rank-three' : '' %>"><%= index + 1 %></td>
              <td class="<%= index === 0 ? 'rank-one' : index === 1 ? 'rank-two' : index === 2 ? 'rank-three' : '' %>"><%= user.username %></td>
              <td class="<%= index === 0 ? 'rank-one' : index === 1 ? 'rank-two' : index === 2 ? 'rank-three' : '' %>"><%= formatTime(user.timeSpent) %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } else { %>
      <p>No leaderboard data available.</p>
    <% } %>
  </section>

   -->

  <!-- Featured Subjects Section -->
  <section id="featured-subjects" class="container my-5">
    <h2 class="text-center mb-4">Featured Subjects</h2>
    <div class="card-container row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 row-cols-3">
      <% if (allSubjects && allSubjects.length > 0) { %>
        <% allSubjects.forEach(subject => { %>
          <div class="card" onclick="window.location.href='/subjects/<%= subject.title %>'">
            <img src="<%= subject.image || '/images/msbte.jpeg' %>" alt="Subject Image" class="subject-image" loading="lazy" width="300" height="200">
            <h3><%= subject.title %></h3>
          </div>
        <% }) %>
      <% } else { %>
        <p>No featured subjects available at the moment.</p>
      <% } %>
    </div>
  </section>


  <!-- Features Section -->
  <section id="features" class="container my-5">
    <h2 class="text-center mb-4">Features</h2>
    <div class="row">
      <div class="col-md-4 mb-4">
        <div class="feature-card text-center p-4">
          <div class="feature-icon">
            <i class="bi bi-check-circle"></i>
          </div>
          <h4>Interactive Questions</h4>
          <p>Engaging Tests with various question types to test your knowledge effectively.</p>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="feature-card text-center p-4">
          <div class="feature-icon">
            <i class="bi bi-trophy"></i>
          </div>
          <h4>Track Your Progress</h4>
          <p>Monitor your performance and track improvements over time.</p>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="feature-card text-center p-4">
          <div class="feature-icon">
            <i class="bi bi-people"></i>
          </div>
          <h4>Competitive Edge</h4>
          <p>Challenge yourself and compete with others to climb the leaderboard.</p>
        </div>
      </div>
    </div>
  </section>
